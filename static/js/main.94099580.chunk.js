(this["webpackJsonpcrud-sample"]=this["webpackJsonpcrud-sample"]||[]).push([[0],{139:function(e,a,t){e.exports=t(156)},144:function(e,a,t){},156:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(10),l=t.n(i),c=(t(113),t(144),t(57)),o=t(12),u=t(53),m=t(104);t(145),t(148);m.initializeApp({apiKey:"AIzaSyCadADxCljcojVmEW5AecArq0tQTcTnXgo",authDomain:"authentication-crud-app.firebaseapp.com",databaseURL:"https://authentication-crud-app.firebaseio.com",projectId:"authentication-crud-app",storageBucket:"authentication-crud-app.appspot.com",messagingSenderId:"885220264165",appId:"1:885220264165:web:6b66063fae5c34d7f36c0c"});var s=m,p=r.a.createContext(),d=function(e){var a=e.children,t=Object(n.useState)(null),i=Object(u.a)(t,2),l=i[0],c=i[1];return Object(n.useEffect)((function(){s.auth().onAuthStateChanged(c)}),[]),r.a.createElement(p.Provider,{value:{currentUser:l}},a)},f=t(124),b=function(e){var a=e.component,t=Object(f.a)(e,["component"]),i=Object(n.useContext)(p).currentUser;return r.a.createElement(o.b,Object.assign({},t,{render:function(e){return i?r.a.createElement(a,e):r.a.createElement(o.a,{to:"/login"})}}))},E=t(38),x=t.n(E),h=t(62),v=t(23),g=t(189),y=function(e){var a=e.name,t=e.label,n=e.type,i=e.required,l=void 0!==i&&i;return r.a.createElement(v.b,{as:g.a,required:l,name:a,label:t,fullWidth:!0,type:n,autoComplete:"false",helperText:r.a.createElement(v.a,{name:a})})};y.defaultProps={type:"text"};var w=t(32),S=t(193),j=t(194),O=t(201),k=t(195),q=t(196),C=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",maxWidth:"400px",backgroundColor:e.palette.background.paper},box:{display:"flex",flexDirection:"column",width:"100%",height:"300px",padding:"30px 0"},form:{display:"flex",flexDirection:"column",margin:"5px 0 30px 0",padding:"0 15px"},inputGroup:{margin:"5px 0"}}})),N=function(e){var a=e.history,t=Object(n.useContext)(p).currentUser,i=C();return r.a.createElement(j.a,{className:i.root},r.a.createElement(O.a,{boxShadow:3,className:i.box},r.a.createElement(k.a,{variant:"h3",align:"center",color:"inherit"},"Login"),r.a.createElement(v.d,{initialValues:{email:"",password:""},validationSchema:w.a().shape({email:w.b().email("Invalid Email").required("Required"),password:w.b().required("Required")}),onSubmit:function(){var e=Object(h.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.auth().signInWithEmailAndPassword(t.email,t.password);case 3:a.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}()},(function(e){return t?r.a.createElement(o.a,{to:"/"}):r.a.createElement(v.c,{className:i.form},r.a.createElement("div",{className:i.inputGroup},r.a.createElement(y,{name:"email",label:"Email",type:"email"})),r.a.createElement("div",{className:i.inputGroup},r.a.createElement(y,{name:"password",label:"Password",type:"password"})),r.a.createElement(q.a,{type:"submit",disabled:e.isSubmitting||!e.dirty||!e.isValid,variant:"contained",color:"primary"},"LOGIN"))})),r.a.createElement(k.a,{variant:"caption",color:"inherit",align:"center"},r.a.createElement(c.b,{to:"/signup"},"Don't have an account? Sign Up"))))},A=t(122),I=t(166),W=t(203),P=t(162),U=t(160),D=t(164),R=function(e){var a=e.name,t=e.label,n=e.items,i=e.required,l=void 0!==i&&i;return r.a.createElement(U.a,{fullWidth:!0,required:l},r.a.createElement(I.a,null,t),r.a.createElement(v.b,{as:D.a,name:a},n.map((function(e){return r.a.createElement(W.a,{key:e.value,value:e.value},e.label)}))),r.a.createElement(P.a,null,r.a.createElement(v.a,{name:a})))},V=[{label:"Front End",value:"front_end"},{label:"Back-End",value:"back_end"},{label:"Devops",value:"devops"},{label:"QA",value:"qa"}],G=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",maxWidth:"600px",backgroundColor:e.palette.background.paper},box:{display:"flex",flexDirection:"column",width:"100%",padding:"30px 0"},form:{display:"flex",flexDirection:"column",margin:"5px 0 30px 0",padding:"0 15px","& button":Object(A.a)({margin:"5px"},"@media (min-width:600px)",{alignSelf:"flex-end"})},inputGroup:{margin:"5px",flex:"1, 1, 100px"}}})),T=Object(o.f)((function(e){var a=e.history,t=G();return r.a.createElement(j.a,{className:t.root},r.a.createElement(O.a,{boxShadow:3,className:t.box},r.a.createElement(k.a,{variant:"h3",align:"center",color:"inherit"},"Sign Up"),r.a.createElement(v.d,{initialValues:{name:"",surname:"",email:"",password:"",position:"",photoUrl:""},validationSchema:w.a({name:w.b().required("Required").max(15,"Max 15 characters"),surname:w.b().required("Required").max(20,"Max 20 characters"),email:w.b().email("Invalid email").required("Required"),password:w.b().required("Required"),position:w.b().oneOf(["front_end","back_end","devops","qa"]).required("Required")}),onSubmit:function(){var e=Object(h.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,e.prev=1,e.next=4,s.auth().createUserWithEmailAndPassword(t.email,t.password);case 4:return e.next=6,s.firestore().collection("users").doc(s.auth().currentUser.uid).set({name:t.name,surname:t.surname,email:t.email,position:t.position,createdAt:s.firestore.FieldValue.serverTimestamp()});case 6:r(),a.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0,e.t0.code,e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}()},(function(e){return r.a.createElement(v.c,{className:t.form},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement("div",{style:{flex:"1 1 150px",margin:"5px"}},r.a.createElement(y,{name:"name",label:"Name",required:!0})),r.a.createElement("div",{style:{flex:"1 1 200px",margin:"5px"}},r.a.createElement(y,{name:"surname",label:"Surname",required:!0}))),r.a.createElement("div",{className:t.inputGroup},r.a.createElement(y,{name:"email",label:"Email",type:"email",required:!0})),r.a.createElement("div",{className:t.inputGroup},r.a.createElement(y,{name:"password",label:"password",type:"password",required:!0})),r.a.createElement("div",{className:t.inputGroup},r.a.createElement(R,{name:"position",label:"Position",items:V,required:!0})),r.a.createElement(q.a,{type:"submit",disabled:!e.dirty||!e.isValid||e.isSubmitting,variant:"contained",color:"primary"},"Submit"))})),r.a.createElement(k.a,{variant:"caption",color:"inherit",align:"center"},r.a.createElement(c.b,{to:"/login"},"Already have an account? Login"))))})),L=t(202),B=t(197),M=Object(S.a)((function(e){return{box:{position:"relative",maxWidth:"600px",margin:"0 auto",marginTop:"50px"},backdrop:{position:"absolute",zIndex:999}}})),z=function(e){var a=Object(n.useState)({}),t=Object(u.a)(a,2),i=t[0],l=t[1],c=Object(n.useState)(!0),o=Object(u.a)(c,2),m=o[0],d=o[1],f=Object(n.useContext)(p).currentUser,b=M();return Object(n.useEffect)((function(){setTimeout((function(){d(!1)}),2e3)}),[]),Object(n.useEffect)((function(){s.firestore().collection("users").doc(s.auth().currentUser.uid).get().then((function(e){e.exists&&l(e.data(),(function(){d(!1)}))}))}),[]),r.a.createElement(j.a,null,r.a.createElement(O.a,{boxShadow:3,bgcolor:"background.paper",m:1,p:3,className:b.box},r.a.createElement(L.a,{open:m,className:b.backdrop},r.a.createElement(B.a,null)),r.a.createElement(k.a,{variant:"h3",color:"inherit",align:"center"},"Profile"),r.a.createElement("div",null,r.a.createElement(v.d,{enableReinitialize:!0,initialValues:{name:i.name||"",surname:i.surname||"",email:i.email||"",position:i.position||""},onSubmit:function(){var e=Object(h.a)(x.a.mark((function e(a,t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.setSubmitting)(!0),e.next=4,s.firestore().collection("users").doc(f.uid).set(a).then((function(){s.firestore().collection("users").doc(f.uid).get().then((function(e){e.exists&&l(e.data(),(function(){n(!1)}))}))}));case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},(function(a){return r.a.createElement(v.c,{style:{marginTop:"15px"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement("div",{style:{flex:"1 1 150px",margin:"5px"}},r.a.createElement(y,{name:"name",label:"Name"})),r.a.createElement("div",{style:{flex:"1 1 200px",margin:"5px"}},r.a.createElement(y,{name:"surname",label:"Surname"}))),r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(y,{name:"email",label:"Email"})),r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(R,{name:"position",label:"Position",items:V})),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-end"}},r.a.createElement("div",{style:{marginTop:"15px"}},r.a.createElement(q.a,{variant:"text",color:"default",name:"close",onClick:function(){return e.setShowProfile(!1)}},"CLOSE"),r.a.createElement(q.a,{variant:"contained",color:"primary",type:"submit",name:"save",style:{marginLeft:"5px"},disabled:!a.dirty||!a.isValid||a.isSubmitting},a.isSubmitting?"SAVING...":"SAVE"))))})))))},F=t(206),_=t(198),J=t(199),Q=t(200),K=t(123),X=function(){var e=r.a.useState(null),a=Object(u.a)(e,2),t=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(u.a)(l,2),o=c[0],m=c[1],p=function(){i(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{color:"primary",position:"static",fullWidth:!0},r.a.createElement(J.a,null,r.a.createElement(k.a,{variant:"subtitle2",color:"inherit",style:{flex:1}},"CRUD APP"),r.a.createElement(Q.a,{color:"inherit"},r.a.createElement(F.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){i(e.currentTarget)}}),r.a.createElement(K.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:p},r.a.createElement(W.a,{onClick:function(){m(!0),p()}},"My account"),r.a.createElement(W.a,{onClick:function(){s.auth().signOut()}},"Logout"))))),o&&r.a.createElement(z,{setShowProfile:m}))},$=function(){return r.a.createElement(d,null,r.a.createElement(c.a,{basename:"/"},r.a.createElement(b,{exact:!0,path:"/",component:X}),r.a.createElement(o.b,{exact:!0,path:"/login",component:N}),r.a.createElement(o.b,{exact:!0,path:"/signup",component:T})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[139,1,2]]]);
//# sourceMappingURL=main.94099580.chunk.js.map