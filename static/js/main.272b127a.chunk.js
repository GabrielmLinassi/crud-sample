(this["webpackJsonpcrud-sample"]=this["webpackJsonpcrud-sample"]||[]).push([[0],{139:function(e,a,t){e.exports=t(156)},144:function(e,a,t){},156:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(10),l=t.n(i),o=(t(113),t(144),t(58)),c=t(13),s=t(36),u=t(104);t(145),t(148);u.initializeApp({apiKey:"AIzaSyCadADxCljcojVmEW5AecArq0tQTcTnXgo",authDomain:"authentication-crud-app.firebaseapp.com",databaseURL:"https://authentication-crud-app.firebaseio.com",projectId:"authentication-crud-app",storageBucket:"authentication-crud-app.appspot.com",messagingSenderId:"885220264165",appId:"1:885220264165:web:6b66063fae5c34d7f36c0c"});var m=u,d=r.a.createContext(),p=function(e){var a=e.children,t=Object(n.useState)(null),i=Object(s.a)(t,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){m.auth().onAuthStateChanged(o)}),[]),r.a.createElement(d.Provider,{value:{currentUser:l}},a)},f=t(124),x=function(e){var a=e.component,t=Object(f.a)(e,["component"]),i=Object(n.useContext)(d).currentUser;return r.a.createElement(c.b,Object.assign({},t,{render:function(e){return i?r.a.createElement(a,e):r.a.createElement(c.a,{to:"/login"})}}))},h=t(39),b=t.n(h),E=t(63),g=t(11),v=t(189),w=function(e){var a=e.name,t=e.label,n=e.type,i=e.required,l=void 0!==i&&i;return r.a.createElement(g.b,{as:v.a,required:l,name:a,label:t,fullWidth:!0,type:n,autoComplete:"false",helperText:r.a.createElement(g.a,{name:a})})};w.defaultProps={type:"text"};var y=t(18),S=t(193),C=t(194),j=t(201),O=t(195),k=t(196),q=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",maxWidth:"400px",backgroundColor:e.palette.background.paper},box:{display:"flex",flexDirection:"column",width:"100%",height:"300px",padding:"30px 0"},form:{display:"flex",flexDirection:"column",margin:"5px 0 30px 0",padding:"0 15px"},inputGroup:{margin:"5px 0"}}})),N=function(e){var a=e.history,t=Object(n.useContext)(d).currentUser,i=q();return r.a.createElement(C.a,{className:i.root},r.a.createElement(j.a,{boxShadow:3,className:i.box},r.a.createElement(O.a,{variant:"h3",align:"center",color:"inherit"},"Login"),r.a.createElement(g.d,{initialValues:{email:"",password:""},validationSchema:y.a().shape({email:y.c().email("Invalid Email").required("Required"),password:y.c().required("Required")}),onSubmit:function(){var e=Object(E.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.auth().signInWithEmailAndPassword(t.email,t.password);case 3:a.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}()},(function(e){return t?r.a.createElement(c.a,{to:"/"}):r.a.createElement(g.c,{className:i.form},r.a.createElement("div",{className:i.inputGroup},r.a.createElement(w,{name:"email",label:"Email",type:"email"})),r.a.createElement("div",{className:i.inputGroup},r.a.createElement(w,{name:"password",label:"Password",type:"password"})),r.a.createElement(k.a,{type:"submit",disabled:e.isSubmitting||!e.dirty||!e.isValid,variant:"contained",color:"primary"},"LOGIN"))})),r.a.createElement(O.a,{variant:"caption",color:"inherit",align:"center"},r.a.createElement(o.b,{to:"/signup"},"Don't have an account? Sign Up"))))},P=t(122),U=t(166),W=t(203),A=t(162),I=t(160),V=t(164),D=function(e){var a=e.name,t=e.label,n=e.items,i=e.required,l=void 0!==i&&i;return r.a.createElement(I.a,{fullWidth:!0,required:l},r.a.createElement(U.a,null,t),r.a.createElement(g.b,{as:V.a,name:a},n.map((function(e){return r.a.createElement(W.a,{key:e.value,value:e.value},e.label)}))),r.a.createElement(A.a,null,r.a.createElement(g.a,{name:a})))},R=[{label:"Front End",value:"front_end"},{label:"Back-End",value:"back_end"},{label:"Devops",value:"devops"},{label:"QA",value:"qa"}],L=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",maxWidth:"600px",backgroundColor:e.palette.background.paper},box:{display:"flex",flexDirection:"column",width:"100%",padding:"30px 0"},form:{display:"flex",flexDirection:"column",margin:"5px 0 30px 0",padding:"0 15px","& button":Object(P.a)({margin:"5px"},"@media (min-width:600px)",{alignSelf:"flex-end"})},inputGroup:{margin:"5px",flex:"1, 1, 100px"}}})),_=Object(c.f)((function(e){var a=e.history,t=L();return r.a.createElement(C.a,{className:t.root},r.a.createElement(j.a,{boxShadow:3,className:t.box},r.a.createElement(O.a,{variant:"h3",align:"center",color:"inherit"},"Sign Up"),r.a.createElement(g.d,{initialValues:{name:"",surname:"",email:"",password:"",position:"",photoUrl:""},validationSchema:y.a({name:y.c().required("Required").max(15,"Max 15 characters"),surname:y.c().required("Required").max(20,"Max 20 characters"),email:y.c().email("Invalid email").required("Required"),password:y.c().required("Required"),position:y.c().oneOf(["front_end","back_end","devops","qa"]).required("Required")}),onSubmit:function(){var e=Object(E.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,e.prev=1,e.next=4,m.auth().createUserWithEmailAndPassword(t.email,t.password);case 4:return e.next=6,m.firestore().collection("users").doc(m.auth().currentUser.uid).set({name:t.name,surname:t.surname,email:t.email,position:t.position,createdAt:m.firestore.FieldValue.serverTimestamp()});case 6:r(),a.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0,e.t0.code,e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}()},(function(e){return r.a.createElement(g.c,{className:t.form},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement("div",{style:{flex:"1 1 150px",margin:"5px"}},r.a.createElement(w,{name:"name",label:"Name",required:!0})),r.a.createElement("div",{style:{flex:"1 1 200px",margin:"5px"}},r.a.createElement(w,{name:"surname",label:"Surname",required:!0}))),r.a.createElement("div",{className:t.inputGroup},r.a.createElement(w,{name:"email",label:"Email",type:"email",required:!0})),r.a.createElement("div",{className:t.inputGroup},r.a.createElement(w,{name:"password",label:"password",type:"password",required:!0})),r.a.createElement("div",{className:t.inputGroup},r.a.createElement(D,{name:"position",label:"Position",items:R,required:!0})),r.a.createElement(k.a,{type:"submit",disabled:!e.dirty||!e.isValid||e.isSubmitting,variant:"contained",color:"primary"},"Submit"))})),r.a.createElement(O.a,{variant:"caption",color:"inherit",align:"center"},r.a.createElement(o.b,{to:"/login"},"Already have an account? Login"))))})),G=t(205),T=t(197),z=Object(S.a)((function(e){return{box:{maxWidth:"700px",backgroundColor:e.palette.background.paper,margin:"15px auto 0",padding:"15px 0"},form:{display:"flex",flexWrap:"wrap",alignItems:"flex-end",padding:"15px"},button:{marginLeft:"5px"}}})),B=function(e){var a=z(),t=Object(n.useState)(""),i=Object(s.a)(t,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){o(m.auth().currentUser.email)}),[]),r.a.createElement(j.a,{boxShadow:3,className:a.box},r.a.createElement(O.a,{variant:"subtitle1",color:"inherit",align:"left",style:{padding:"0 15px"}},"Change Email"),r.a.createElement(g.d,{enableReinitialize:!0,initialValues:{email:l||"",password:""},onSubmit:function(e){var a=e.password,t=e.email,n=m.auth.EmailAuthProvider.credential(m.auth().currentUser.email,a);m.auth().currentUser.reauthenticateWithCredential(n).then((function(){m.auth().currentUser.updateEmail(t).then((function(){o(t),alert('Email changed to "'.concat(t,'" sucessfully!'))})).catch((function(e){alert(e.message),console.log(e)}))})).catch((function(e){alert("Password Invalid"),console.log(e)}))}},(function(e){return r.a.createElement(g.c,{className:a.form},r.a.createElement("div",{style:{flex:"1 1 150px",margin:"5px"}},r.a.createElement(w,{name:"password",label:"Password",type:"password"})),r.a.createElement("div",{style:{flex:"1 1 150px",margin:"5px"}},r.a.createElement(w,{name:"email",label:"Email",type:"email"})),r.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",className:a.button},"SAVE"))})))},M=Object(S.a)((function(e){return{box:{maxWidth:"700px",backgroundColor:e.palette.background.paper,margin:"15px auto 0",padding:"15px 0"},form:{display:"flex",flexWrap:"wrap",alignItems:"flex-end",padding:"15px"},textfield:{flex:"1 1 150px","&+&":{marginLeft:"5px"}},button:{marginLeft:"5px"}}})),F=function(e){var a=M();return r.a.createElement(j.a,{boxShadow:3,className:a.box},r.a.createElement(g.d,{enableReinitialize:!0,initialValues:{password:"",new_password:"",confirm_password:""},validationSchema:y.a({password:y.c().required("Current password is required"),new_password:y.c().required("Password is required"),confirm_password:y.c().oneOf([y.b("new_password"),null],"Passwords don't match").required("Password confirm is required")}),onSubmit:function(e,a){var t=e.password,n=e.new_password,r=a.setSubmitting;m.auth().currentUser.reauthenticateWithCredential(m.auth.EmailAuthProvider.credential(m.auth().currentUser.email,t)).then((function(){m.auth().currentUser.updatePassword(n).then((function(){alert("Password changed successfully")})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log("Error on reauthentication:",e.message),r(!1)}))}},(function(e){return r.a.createElement(g.c,{className:a.form},r.a.createElement("div",{className:a.textfield},r.a.createElement(w,{name:"password",label:"Current Password",type:"password"})),r.a.createElement("div",{className:a.textfield},r.a.createElement(w,{name:"new_password",label:"New Password",type:"password"})),r.a.createElement("div",{className:a.textfield},r.a.createElement(w,{name:"confirm_password",label:"Confirm Password",type:"password"})),r.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",className:a.button,disabled:!e.dirty||!e.isValid||e.isSubmitting},"SAVE"))})))},J=Object(S.a)((function(e){return{box:{maxWidth:"700px",backgroundColor:e.palette.background.paper,margin:"15px auto 0",padding:"15px 0"},form:{display:"flex",alignItems:"flex-end",padding:"0 15px"}}})),Q=function(){var e=J();return r.a.createElement(j.a,{boxShadow:3,className:e.box},r.a.createElement(g.d,{initialValues:{password:""},validationSchema:y.a({password:y.c().required("Required!")}),onSubmit:function(e){var a=e.password,t=m.auth.EmailAuthProvider.credential(m.auth().currentUser.email,a);m.auth().currentUser.reauthenticateWithCredential(t).then((function(){m.auth().currentUser.delete().then((function(){alert("Account deleted Sucessfully!")})).catch((function(e){alert("Couldn't remove account"),console.log("Error removing account:",e)}))})).catch((function(e){alert("Password is Invalid"),console.log("reauthenticateWithCredential Error:",e)}))}},(function(a){return r.a.createElement(g.c,{className:e.form},r.a.createElement("div",{style:{margin:"5px",flex:"1"}},r.a.createElement(w,{name:"password",label:"Password",required:!0,type:"password"})),r.a.createElement(k.a,{variant:"contained",color:"secondary",type:"submit",style:{}},"DELETE ACCOUNT"))})))},H=Object(S.a)((function(e){return{box:{width:"100%",backgroundColor:e.palette.background.paper,maxWidth:"700px",margin:"15px auto 0",padding:"15px 0"},backdrop:{display:"none",position:"absolute",zIndex:999},form:{padding:"15px"},buttons:{display:"flex",justifyContent:"flex-end",margin:"15px auto 0","& button":{marginLeft:"5px"}}}})),K=function(e){var a=Object(n.useState)({}),t=Object(s.a)(a,2),i=t[0],l=t[1],o=Object(n.useState)(!0),c=Object(s.a)(o,2),u=c[0],p=c[1],f=Object(n.useContext)(d).currentUser,x=H();return Object(n.useEffect)((function(){m.firestore().collection("users").doc(m.auth().currentUser.uid).get().then((function(e){e.exists&&l(e.data(),p(!1))}))}),[]),r.a.createElement(C.a,null,r.a.createElement(j.a,{boxShadow:3,className:x.box},r.a.createElement(G.a,{open:u,className:x.backdrop},r.a.createElement(T.a,null)),r.a.createElement(O.a,{variant:"h3",color:"inherit",align:"center"},"Profile"),r.a.createElement("div",null,r.a.createElement(g.d,{enableReinitialize:!0,initialValues:{name:i.name||"",surname:i.surname||"",email:i.email||"",position:i.position||""},onSubmit:function(){var e=Object(E.a)(b.a.mark((function e(a,t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.setSubmitting)(!0),e.next=4,m.firestore().collection("users").doc(f.uid).set(a).then((function(){m.firestore().collection("users").doc(f.uid).get().then((function(e){e.exists&&l(e.data(),n(!1))}))}));case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},(function(e){return r.a.createElement(g.c,{className:x.form},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},r.a.createElement("div",{style:{flex:"1 1 150px",margin:"5px"}},r.a.createElement(w,{name:"name",label:"Name"})),r.a.createElement("div",{style:{flex:"1 1 200px",margin:"5px"}},r.a.createElement(w,{name:"surname",label:"Surname"}))),r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(D,{name:"position",label:"Position",items:R})),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"flex-end"}},r.a.createElement("div",{style:{marginTop:"15px"}},r.a.createElement(k.a,{variant:"contained",color:"primary",type:"submit",name:"save",style:{marginLeft:"5px"},disabled:!e.dirty||!e.isValid||e.isSubmitting},e.isSubmitting?"SAVING...":"SAVE"))))})))),r.a.createElement(B,null),r.a.createElement(F,null),r.a.createElement(Q,null),r.a.createElement("div",{className:x.buttons},r.a.createElement(k.a,{variant:"contained",color:"default",onClick:function(){e.setShowProfile(!1)}},"CLOSE")))},X=t(202),$=t(198),Y=t(199),Z=t(200),ee=t(123),ae=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",minHeight:"100vh"},lastChild:{marginBottom:"15px"}}})),te=function(){var e=r.a.useState(null),a=Object(s.a)(e,2),t=a[0],i=a[1],l=Object(n.useState)(!1),o=Object(s.a)(l,2),c=o[0],u=o[1],d=ae(),p=function(){i(null)};return r.a.createElement("div",{className:d.root},r.a.createElement($.a,{color:"primary",position:"sticky",fullWidth:!0},r.a.createElement(Y.a,null,r.a.createElement(O.a,{variant:"subtitle2",color:"inherit",style:{flex:1}},r.a.createElement(k.a,{color:"inherit",onClick:function(){u(!1)}},"CRUD APP")),r.a.createElement(Z.a,{color:"inherit"},r.a.createElement(X.a,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",onClick:function(e){i(e.currentTarget)}}),r.a.createElement(ee.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:p},r.a.createElement(W.a,{onClick:function(){u(!c),p()}},"My account"),r.a.createElement(W.a,{onClick:function(){m.auth().signOut()}},"Logout"))))),r.a.createElement("div",{className:d.lastChild},c&&r.a.createElement(K,{setShowProfile:u})))},ne=function(){return r.a.createElement(p,null,r.a.createElement(o.a,{basename:"/"},r.a.createElement(x,{exact:!0,path:"/",component:te}),r.a.createElement(c.b,{exact:!0,path:"/login",component:N}),r.a.createElement(c.b,{exact:!0,path:"/signup",component:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[139,1,2]]]);
//# sourceMappingURL=main.272b127a.chunk.js.map